<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nova Shop</title>
  <style>
    /* ----------- ESTILOS GENERALES ----------- */
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin:0; 
      background:#f4f6f9; 
      color:#333;
    }
    header { 
      background: linear-gradient(135deg, #2c3e50, #34495e);
      color:#fff; 
      padding:15px; 
      display:flex; 
      flex-wrap:wrap;
      justify-content:space-between; 
      align-items:center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    header h1 { margin:0; font-size:1.8em; }
    nav { display:flex; flex-wrap:wrap; gap:10px; }
    nav button { 
      padding:10px 18px; 
      border:none; 
      border-radius:25px; 
      background:#3498db; 
      color:#fff; 
      cursor:pointer; 
      transition:0.3s;
      font-weight:bold;
    }
    nav button:hover { background:#2980b9; transform:scale(1.05); }

    .container { padding:20px; max-width:1200px; margin:auto; }
    section { margin-bottom:30px; }

    /* ----------- IMAGEN PRINCIPAL ----------- */
    .hero-banner {
      background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=300&fit=crop');
      background-size: cover;
      background-position: center;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      margin-bottom: 30px;
      border-radius: 15px;
    }
    .hero-content h2 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
    }
    .hero-content p {
      font-size: 1.2em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    }

    /* ----------- PRODUCTOS ----------- */
    .products { 
      display:grid; 
      grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); 
      gap:20px; 
    }
    .product { 
      background:#fff; 
      border-radius:15px; 
      padding:15px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1); 
      text-align:center; 
      transition:0.3s;
    }
    .product:hover { transform:translateY(-5px); }
    .product img { width:100%; height:180px; object-fit:cover; border-radius:10px; }
    .product h4 { margin:10px 0; }
    .product button { 
      background:#27ae60; 
      color:#fff; 
      border:none; 
      padding:10px 15px; 
      margin-top:10px; 
      cursor:pointer; 
      border-radius:8px; 
      transition:0.3s;
    }
    .product button:hover { background:#1e8449; transform:scale(1.05); }

    /* ----------- TABLAS ----------- */
    table { width:100%; border-collapse: collapse; background:#fff; border-radius:10px; overflow:hidden; }
    th, td { padding:12px; border-bottom:1px solid #eee; text-align:center; font-size:0.95em; }
    th { background:#3498db; color:#fff; }
    .qtyBtn { 
      padding:5px 10px; 
      background:#3498db; 
      color:white; 
      border:none; 
      border-radius:5px; 
      cursor:pointer; 
      font-size:1em;
      margin:0 5px;
    }
    .qtyBtn:hover { background:#2980b9; }

    /* ----------- FORMULARIOS ----------- */
    form { 
      background:#fff; 
      padding:20px; 
      border-radius:15px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1); 
      max-width:450px; 
      margin:auto; 
    }
    form input, form select { 
      width:100%; 
      padding:12px; 
      margin-bottom:15px; 
      border:1px solid #ccc; 
      border-radius:8px; 
      font-size:1em; 
      box-sizing: border-box;
    }
    form button { 
      background:#27ae60; 
      color:#fff; 
      border:none; 
      padding:12px; 
      width:100%; 
      cursor:pointer; 
      border-radius:8px; 
      font-size:1em; 
      font-weight:bold; 
      transition:0.3s;
    }
    form button:hover { background:#1e8449; }

    /* ----------- AUTH SECTION STYLES ----------- */
    .auth-container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
      margin-top: 20px;
    }
    
    .auth-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
      color: white;
      min-width: 320px;
      max-width: 400px;
      flex: 1;
      position: relative;
      overflow: hidden;
    }
    
    .auth-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 100%);
      pointer-events: none;
    }
    
    .auth-card.register-card {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      box-shadow: 0 15px 35px rgba(240, 147, 251, 0.3);
    }
    
    .auth-card h3 {
      margin: 0 0 25px 0;
      font-size: 1.8em;
      text-align: center;
      font-weight: 300;
      letter-spacing: 1px;
    }
    
    .auth-card .icon {
      font-size: 3em;
      text-align: center;
      margin-bottom: 20px;
      opacity: 0.9;
    }
    
    .auth-input {
      width: 100%;
      padding: 15px 18px;
      margin-bottom: 20px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 1em;
      box-sizing: border-box;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }
    
    .auth-input::placeholder {
      color: rgba(255, 255, 255, 0.8);
    }
    
    .auth-input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.02);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .auth-btn {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    .auth-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    
    .auth-btn:active {
      transform: translateY(0);
    }
    
    .welcome-card {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      color: white;
      box-shadow: 0 15px 35px rgba(79, 172, 254, 0.3);
      max-width: 500px;
      margin: 20px auto;
      position: relative;
      overflow: hidden;
    }
    
    .welcome-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.1) 50%, transparent 60%);
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    
    .welcome-card h3 {
      font-size: 2.2em;
      margin-bottom: 15px;
      font-weight: 300;
    }
    
    .welcome-card .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5em;
      margin: 0 auto 20px auto;
      backdrop-filter: blur(10px);
    }
    
    .logout-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 12px 30px;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1em;
      font-weight: bold;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      margin-top: 15px;
    }
    
    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    /* ----------- HISTORIAL ----------- */
    .history-card {
      background:#fff; 
      padding:15px; 
      margin:15px 0; 
      border-radius:10px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }
    .history-card h4 { margin-top:0; }

    /* ----------- HIDDEN CLASS ----------- */
    .hidden { display: none !important; }

    /* ----------- RESPONSIVE ----------- */
    @media (max-width:600px) {
      header { flex-direction:column; text-align:center; }
      nav { justify-content:center; }
      .hero-content h2 { font-size: 2em; }
      .hero-content p { font-size: 1em; }
      .auth-container { flex-direction: column; align-items: center; }
      .auth-card { min-width: 280px; max-width: 350px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Nova Shop</h1>
    <nav>
      <button onclick="showSection('products')">Productos</button>
      <button onclick="showSection('cart')">Carrito (<span id="cartCount">0</span>)</button>
      <button onclick="showSection('history')">Historial</button>
      <button onclick="showSection('auth')">Cuenta</button>
    </nav>
  </header>

  <div class="container">
    <!-- Productos -->
    <section id="products">
      <div class="hero-banner">
        <div class="hero-content">
          <h2>üõçÔ∏è Bienvenido a Nova Shop</h2>
          <p>Descubre la mejor selecci√≥n de productos con estilo √∫nico</p>
        </div>
      </div>
      <h2>Nuestros Productos</h2>
      <div class="products" id="productList"></div>
    </section>

    <!-- Carrito -->
    <section id="cart" style="display:none;">
      <h2>üõí Carrito</h2>
      <table>
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody id="cartItems"></tbody>
      </table>
      <h3>Total: $<span id="cartTotal">0</span></h3>
      <button onclick="checkout()" id="checkoutBtn">Finalizar Compra</button>
    </section>

    <!-- Pago -->
    <section id="checkout" style="display:none;">
      <h2>üí≥ Finalizar Compra</h2>
      <form id="paymentForm">
        <label for="paymentMethod">M√©todo de Pago</label>
        <select id="paymentMethod" required onchange="togglePaymentFields()">
          <option value="">Seleccione...</option>
          <option value="card">Tarjeta de Cr√©dito/D√©bito</option>
          <option value="paypal">PayPal</option>
        </select>

        <div id="cardFields" class="hidden">
          <input type="text" placeholder="N√∫mero de tarjeta" maxlength="16">
          <input type="text" placeholder="MM/AA">
          <input type="text" placeholder="CVV" maxlength="3">
        </div>

        <div id="paypalFields" class="hidden">
          <input type="email" placeholder="Correo PayPal">
          <input type="password" placeholder="Contrase√±a PayPal">
        </div>

        <button type="submit">Confirmar Pago</button>
      </form>
    </section>

    <!-- Historial -->
    <section id="history" style="display:none;">
      <h2>üìú Historial de Compras</h2>
      <div id="historyList"></div>
    </section>

    <!-- Login/Registro -->
    <section id="auth" style="display:none;">
      <h2 style="text-align:center; margin-bottom:30px;">üîê Acceso a tu cuenta</h2>
      <div id="authForms">
        <div class="auth-container">
          <div class="auth-card register-card">
            <div class="icon">üë§</div>
            <h3>Crear Cuenta</h3>
            <input type="text" id="registerUser" placeholder="Nombre de usuario" class="auth-input">
            <input type="password" id="registerPass" placeholder="Contrase√±a segura" class="auth-input">
            <button onclick="register()" class="auth-btn">Registrarse</button>
          </div>
          
          <div class="auth-card">
            <div class="icon">üîë</div>
            <h3>Iniciar Sesi√≥n</h3>
            <input type="text" id="loginUser" placeholder="Tu usuario" class="auth-input">
            <input type="password" id="loginPass" placeholder="Tu contrase√±a" class="auth-input">
            <button onclick="login()" class="auth-btn">Ingresar</button>
          </div>
        </div>
      </div>
      
      <div id="welcome" class="hidden">
        <div class="welcome-card">
          <div class="user-avatar">üë®‚Äçüíº</div>
          <h3>¬°Bienvenido de vuelta!</h3>
          <p style="font-size:1.3em; margin:10px 0;"><strong><span id="userName"></span></strong></p>
          <p style="opacity:0.9; margin-bottom:25px;">Disfruta de tu experiencia de compra personalizada</p>
          <button onclick="logout()" class="logout-btn">Cerrar Sesi√≥n</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    const products = [
      // Ropa y Moda
      {id:1, name:"Camisa Nova", price:25, img:"https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=250&h=180&fit=crop"},
      {id:2, name:"Pantal√≥n Moderno", price:40, img:"https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=250&h=180&fit=crop"},
      {id:3, name:"Zapatos Trend", price:60, img:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=250&h=180&fit=crop"},
      {id:4, name:"Mochila Casual", price:30, img:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=250&h=180&fit=crop"},
      {id:5, name:"Chaqueta Deportiva", price:55, img:"https://images.unsplash.com/photo-1551028719-00167b16eac5?w=250&h=180&fit=crop"},
      {id:6, name:"Vestido Elegante", price:45, img:"https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=250&h=180&fit=crop"},
      {id:7, name:"Gorra Urbana", price:15, img:"https://images.unsplash.com/photo-1575428652377-a4ad09cfa0ca?w=250&h=180&fit=crop"},
      {id:8, name:"Reloj Cl√°sico", price:80, img:"https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=250&h=180&fit=crop"},
      {id:20, name:"Jeans Premium", price:65, img:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=250&h=180&fit=crop"},
      {id:21, name:"Blazer Ejecutivo", price:85, img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=250&h=180&fit=crop"},
      {id:22, name:"Sneakers Limited", price:95, img:"https://images.unsplash.com/photo-1460353581641-37baddab0fa2?w=250&h=180&fit=crop"},
      {id:23, name:"Bolso de Cuero", price:70, img:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=250&h=180&fit=crop"},
      {id:24, name:"Sombrero Fedora", price:35, img:"https://images.unsplash.com/photo-1514327605112-b887c0e61c4a?w=250&h=180&fit=crop"},
      {id:25, name:"Corbata Silk", price:20, img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=250&h=180&fit=crop"},
      {id:26, name:"Falda Midi", price:38, img:"https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=250&h=180&fit=crop"},
      {id:27, name:"Botas de Monta√±a", price:78, img:"https://images.unsplash.com/photo-1544966503-2dcf1cd6718d?w=250&h=180&fit=crop"},
      {id:28, name:"Bufanda de Lana", price:22, img:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=250&h=180&fit=crop"},
      
      // Tecnolog√≠a
      {id:9, name:"Auriculares Bluetooth", price:35, img:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=250&h=180&fit=crop"},
      {id:10, name:"Smartphone Pro", price:299, img:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=250&h=180&fit=crop"},
      {id:11, name:"Tablet Ultra", price:199, img:"https://images.unsplash.com/photo-1561154464-82e9adf32764?w=250&h=180&fit=crop"},
      {id:12, name:"Cargador Port√°til", price:20, img:"https://images.unsplash.com/photo-1609592806725-f62e08e6e8b9?w=250&h=180&fit=crop"},
      {id:29, name:"Laptop Gaming", price:899, img:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=250&h=180&fit=crop"},
      {id:30, name:"Smartwatch Sport", price:129, img:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=250&h=180&fit=crop"},
      {id:31, name:"C√°mara Digital", price:245, img:"https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=250&h=180&fit=crop"},
      {id:32, name:"Teclado Mec√°nico", price:75, img:"https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=250&h=180&fit=crop"},
      {id:33, name:"Mouse Gaming", price:45, img:"https://images.unsplash.com/photo-1527814050087-3793815479db?w=250&h=180&fit=crop"},
      {id:34, name:"Monitor 4K", price:320, img:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=250&h=180&fit=crop"},
      {id:35, name:"Webcam HD", price:55, img:"https://images.unsplash.com/photo-1587826080692-f439cd0b70da?w=250&h=180&fit=crop"},
      {id:36, name:"Altavoz Bluetooth", price:40, img:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=250&h=180&fit=crop"},
      {id:37, name:"Drone Profesional", price:450, img:"https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=250&h=180&fit=crop"},
      {id:38, name:"Consola Gaming", price:399, img:"https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=250&h=180&fit=crop"},
      
      // Casa y Decoraci√≥n
      {id:13, name:"L√°mpara LED", price:25, img:"https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=250&h=180&fit=crop"},
      {id:14, name:"Coj√≠n Decorativo", price:12, img:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=250&h=180&fit=crop"},
      {id:15, name:"Vela Arom√°tica", price:8, img:"https://images.unsplash.com/photo-1602874801007-62c9fb8c9530?w=250&h=180&fit=crop"},
      {id:39, name:"Marco de Fotos", price:15, img:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=250&h=180&fit=crop"},
      {id:40, name:"Espejo Vintage", price:48, img:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=250&h=180&fit=crop"},
      {id:41, name:"Planta Artificial", price:18, img:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=250&h=180&fit=crop"},
      {id:42, name:"Cortinas Elegantes", price:32, img:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=250&h=180&fit=crop"},
      {id:43, name:"Alfombra Moderna", price:55, img:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=250&h=180&fit=crop"},
      {id:44, name:"Reloj de Pared", price:28, img:"https://images.unsplash.com/photo-1563861826100-9cb868fdbe1c?w=250&h=180&fit=crop"},
      {id:45, name:"Jarr√≥n Cer√°mico", price:22, img:"https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=250&h=180&fit=crop"},
      {id:46, name:"Set de Copas", price:35, img:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=250&h=180&fit=crop"},
      {id:47, name:"Organizador Mesa", price:16, img:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=250&h=180&fit=crop"},
      
      // Deportes y Fitness
      {id:16, name:"Botella T√©rmica", price:18, img:"https://images.unsplash.com/photo-1602722053020-af31042989d5?w=250&h=180&fit=crop"},
      {id:17, name:"Esterilla Yoga", price:22, img:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=250&h=180&fit=crop"},
      {id:18, name:"Bandas El√°sticas", price:15, img:"https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?w=250&h=180&fit=crop"},
      {id:19, name:"Gafas de Sol", price:28, img:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=250&h=180&fit=crop"},
      {id:48, name:"Pesas Ajustables", price:85, img:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=250&h=180&fit=crop"},
      {id:49, name:"Bicicleta Monta√±a", price:320, img:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=250&h=180&fit=crop"},
      {id:50, name:"Pelota de Pilates", price:25, img:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=250&h=180&fit=crop"},
      {id:51, name:"Cuerda para Saltar", price:12, img:"https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?w=250&h=180&fit=crop"},
      {id:52, name:"Guantes de Boxeo", price:35, img:"https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?w=250&h=180&fit=crop"},
      {id:53, name:"Patines en L√≠nea", price:65, img:"https://images.unsplash.com/photo-1544966503-7cc5ac882d5f?w=250&h=180&fit=crop"},
      {id:54, name:"Raqueta de Tenis", price:75, img:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=250&h=180&fit=crop"},
      {id:55, name:"Bal√≥n de F√∫tbol", price:20, img:"https://images.unsplash.com/photo-1614632621444-6423b57c4b98?w=250&h=180&fit=crop"},
      
      // Cocina y Alimentaci√≥n
      {id:56, name:"Cafetera Express", price:89, img:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=250&h=180&fit=crop"},
      {id:57, name:"Set de Cuchillos", price:45, img:"https://images.unsplash.com/photo-1544427920-c49ccfb85579?w=250&h=180&fit=crop"},
      {id:58, name:"Licuadora Premium", price:65, img:"https://images.unsplash.com/photo-1570197788417-0e82375c9371?w=250&h=180&fit=crop"},
      {id:59, name:"Sart√©n Antiadherente", price:32, img:"https://images.unsplash.com/photo-1556909114-4e5d717b8b9c?w=250&h=180&fit=crop"},
      {id:60, name:"Tostadora Vintage", price:55, img:"https://images.unsplash.com/photo-1595455810694-9f3f4e7c9e6e?w=250&h=180&fit=crop"},
      {id:61, name:"Termo Caf√©", price:22, img:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=250&h=180&fit=crop"},
      {id:62, name:"Tabla de Cortar", price:18, img:"https://images.unsplash.com/photo-1544427920-c49ccfb85579?w=250&h=180&fit=crop"},
      {id:63, name:"Molde para Hornear", price:25, img:"https://images.unsplash.com/photo-1586444248902-2f64eddc13df?w=250&h=180&fit=crop"},
      
      // Libros y Entretenimiento
      {id:64, name:"Novela Bestseller", price:15, img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=250&h=180&fit=crop"},
      {id:65, name:"Puzzle 1000 Piezas", price:12, img:"https://images.unsplash.com/photo-1606092195730-5d7b9af1efc5?w=250&h=180&fit=crop"},
      {id:66, name:"Juego de Mesa", price:28, img:"https://images.unsplash.com/photo-1566694271453-390536dd1f0d?w=250&h=180&fit=crop"},
      {id:67, name:"Vinilo Cl√°sico", price:25, img:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=250&h=180&fit=crop"},
      {id:68, name:"Auriculares Vintage", price:42, img:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=250&h=180&fit=crop"},
      
      // Salud y Belleza
      {id:69, name:"Crema Facial", price:18, img:"https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=250&h=180&fit=crop"},
      {id:70, name:"Perfume Elegante", price:45, img:"https://images.unsplash.com/photo-1541643600914-78b084683601?w=250&h=180&fit=crop"},
      {id:71, name:"Cepillo El√©ctrico", price:35, img:"https://images.unsplash.com/photo-1607613009820-a29f7bb81c04?w=250&h=180&fit=crop"},
      {id:72, name:"Mascarilla Facial", price:8, img:"https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=250&h=180&fit=crop"},
      {id:73, name:"S√©rum Antienvejecimiento", price:28, img:"https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=250&h=180&fit=crop"},
      {id:74, name:"Kit de Manicura", price:22, img:"https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=250&h=180&fit=crop"},
      {id:75, name:"Difusor Aromas", price:32, img:"https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=250&h=180&fit=crop"}
    ];

    let users = {};
    let currentUser = null;

    const productList = document.getElementById("productList");
    products.forEach(p=>{
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <h4>${p.name}</h4>
        <p>${p.price}</p>
        <button onclick="addToCart(${p.id})">Agregar al Carrito</button>
      `;
      productList.appendChild(div);
    });

    function getCart(){
      return currentUser && users[currentUser]?.cart ? users[currentUser].cart : [];
    }
    function saveCart(cart){
      if(currentUser){
        users[currentUser].cart = cart;
      }
    }

    function showSection(id){
      document.querySelectorAll("section").forEach(s=>s.style.display="none");
      document.getElementById(id).style.display="block";
      if(id==="cart") renderCart();
      if(id==="auth") updateAuthView();
      if(id==="history") renderHistory();
    }

    function addToCart(id){
      if(!currentUser){ alert("Debes iniciar sesi√≥n para agregar al carrito."); return; }
      let cart = getCart();
      const product = products.find(p=>p.id===id);
      const found = cart.find(item=>item.id===id);
      if(found){ found.qty++; } else { cart.push({...product, qty:1}); }
      saveCart(cart);
      updateCartCount();
    }

    function renderCart(){
      let cart = getCart();
      const cartItems = document.getElementById("cartItems");
      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach(item=>{
        const subtotal = item.price * item.qty;
        total += subtotal;
        cartItems.innerHTML += `
          <tr>
            <td>${item.name}</td>
            <td>${item.price}</td>
            <td>
              <button class="qtyBtn" onclick="changeQty(${item.id}, -1)">-</button>
              ${item.qty}
              <button class="qtyBtn" onclick="changeQty(${item.id}, 1)">+</button>
            </td>
            <td>${subtotal}</td>
          </tr>`;
      });
      document.getElementById("cartTotal").textContent = total;
    }

    function changeQty(id, delta){
      let cart = getCart();
      const item = cart.find(p=>p.id===id);
      if(item){
        item.qty += delta;
        if(item.qty<=0) cart = cart.filter(p=>p.id!==id);
        saveCart(cart);
        renderCart();
        updateCartCount();
      }
    }

    function updateCartCount(){
      let cart = getCart();
      let count = cart.reduce((sum,p)=>sum+p.qty,0);
      document.getElementById("cartCount").textContent = count;
    }
    updateCartCount();

    function checkout(){
      let cart = getCart();
      if(cart.length===0){ alert("Tu carrito est√° vac√≠o"); return; }
      showSection('checkout');
    }

    function togglePaymentFields(){
      const method = document.getElementById("paymentMethod").value;
      document.getElementById("cardFields").classList.add("hidden");
      document.getElementById("paypalFields").classList.add("hidden");
      if(method==="card") document.getElementById("cardFields").classList.remove("hidden");
      if(method==="paypal") document.getElementById("paypalFields").classList.remove("hidden");
    }

    document.getElementById("paymentForm").addEventListener("submit", function(e){
      e.preventDefault();
      const cart = getCart();
      const total = cart.reduce((sum,p)=>sum+(p.price*p.qty),0);
      const date = new Date().toLocaleString();
      if(currentUser){
        if(!users[currentUser].history) users[currentUser].history = [];
        users[currentUser].history.push({date, cart, total});
        saveCart([]); 
      }
      alert("‚úÖ Pago realizado con √©xito. ¬°Gracias por tu compra!");
      updateCartCount();
      showSection('history');
    });

    function renderHistory(){
      const historyList = document.getElementById("historyList");
      historyList.innerHTML = "";
      if(!currentUser || !users[currentUser]?.history || users[currentUser].history.length===0){
        historyList.innerHTML = "<p>No tienes compras realizadas a√∫n.</p>";
        return;
      }
      users[currentUser].history.forEach(order=>{
        historyList.innerHTML += `
          <div class="history-card">
            <h4>Compra del ${order.date}</h4>
            <ul>
              ${order.cart.map(item=>`<li>${item.qty} x ${item.name} - ${item.price*item.qty}</li>`).join("")}
            </ul>
            <strong>Total: ${order.total}</strong>
          </div>`;
      });
    }

    function register(){
      const user = document.getElementById("registerUser").value;
      const pass = document.getElementById("registerPass").value;
      if(!user || !pass){ alert("Por favor completa todos los campos"); return; }
      if(users[user]){ alert("El usuario ya existe"); return; }
      users[user] = {password: pass, cart: [], history: []};
      alert("‚úÖ Cuenta creada exitosamente. Ahora inicia sesi√≥n.");
      document.getElementById("registerUser").value = "";
      document.getElementById("registerPass").value = "";
    }

    function login(){
      const user = document.getElementById("loginUser").value;
      const pass = document.getElementById("loginPass").value;
      if(!user || !pass){ alert("Por favor completa todos los campos"); return; }
      if(users[user] && users[user].password===pass){
        currentUser = user;
        updateAuthView();
        updateCartCount();
        alert("¬°Bienvenido " + user + "! üéâ");
      } else { 
        alert("‚ùå Usuario o contrase√±a incorrectos"); 
      }
    }

    function logout(){
      currentUser = null;
      updateAuthView();
      updateCartCount();
      alert("Sesi√≥n cerrada correctamente. ¬°Hasta pronto! üëã");
    }

    function updateAuthView(){
      if(currentUser){
        document.getElementById("authForms").classList.add("hidden");
        document.getElementById("welcome").classList.remove("hidden");
        document.getElementById("userName").textContent = currentUser;
        // Limpiar campos de login
        document.getElementById("loginUser").value = "";
        document.getElementById("loginPass").value = "";
      } else {
        document.getElementById("authForms").classList.remove("hidden");
        document.getElementById("welcome").classList.add("hidden");
      }
    }
  </script>
</body>
</html>